{% extends "template/admin.template.html" %}

{% block title %}Kelola Profil Dosen{% endblock %}

{% block content %}

<h2>Kelola Profil Dosen</h2>
<a class="waves-effect waves-light btn rata-kanan modal-trigger" href="#modal-tambah-profil-dosen">Tambah</a>
<!-- Modal Structure -->
<form method="POST" action="{{ urlFor('dosencreate') }}" id="modal-tambah-profil-dosen" class="validated modal">
	<div class="modal-content">
		<h4>Buat Profil Dosen</h4>
		<div class="row">
			<div class="col m3 teks-tengah">
			<!-- img src="img/grey.jpg" alt="" class=" activator circle responsive-img">
			<a href="#">Pilih Foto</a> -->
			</div>
		</div>
		<div class="col m9">
			<div class="row">
				<div class="col m12">
					<label for="nama-create">Nama Dosen</label>
					<input type="text" id="nama-create" name="nama" class="validate" required/>
				</div>
			</div>
			<div class="row">
				<div class="col m12">
					<label for="nip-create">NIP</label>
					<input type="text" id="nip-create" name="nip" class="validate" required/>
				</div>
			</div>
			<div class="row">
				<div class="col m12">
					<label for="jeniskelamin-create">Jenis Kelamin</label>
					<select name="jeniskelamin" class="browser-default" required>
					  <option value="" disabled selected>Pilih jenis kelamin</option>
					  <option value="L">Pria</option>
					  <option value="P">Wanita</option>
					</select>
				</div>
			</div>
			<div class="row">
				<div class="col m12">
					<label for="pendidikan-create">Pendidikan</label>
					<input type="text" id="pendidikan-create" name="pendidikan" class="validate"  required/>
				</div>
			</div>
			<!-- <div class="row">
			<div class="input-field col m12">
			<textarea class="materialize-textarea"></textarea>
			<label for="mengajar_mata_kuliah">Mengajar Mata Kuliah</label>
			</div> -->
		</div>
	</div>
	<div class="modal-footer">
		<button type="submit" class=" modal-action waves-effect waves-green btn">Simpan</a>
	</div>
</form>

<div class="rd-card white">
	<table class="responsive-table white centered">
		 <thead>
	          <tr>
	              <th data-field="id">Nama Dosen</th>
	              <th data-field="name">Nomor</th>
	              <th data-field="price">Jenis Kelamin</th>
	              <th data-field="price">Pendidikan</th>
	              <th data-field="price">Action</th>
	          </tr>
	        </thead>

	        <tbody>
	        {% for dosen in daftarDosen %}
	          <tr>
	            <td>{{ dosen.nama }}</td>
	            <td>{{dosen.nip}}</td>
	            <td>{{ dosen.jenisKelaminAsString }}</td>
	            <td>{{dosen.pendidikan}}</td>
	            <td>
	            	<a href="#modal-lihat-profil-dosen-{{dosen.id}}" class="modal-trigger rd-admin-action-btn"><i class="small mdi-image-remove-red-eye"></i></a>&nbsp;
	            	<a href="#modal-ubah-profil-dosen-{{dosen.id}}" class="modal-trigger rd-admin-action-btn"><i class="small mdi-editor-mode-edit"></i></a>&nbsp;
	            	<a href="#modal-hapus-profil-dosen-{{dosen.id}}" class="modal-trigger rd-admin-action-btn"><i class="small mdi-action-delete"></i></a></td>
	          </tr>
	         {% endfor %}
	        </tbody>
	</table>
</div>

{% for dosen in daftarDosen %}
<!-- Modal Structure -->
<form method="POST" action="{{ urlFor('dosenupdate', {'id' : dosen.id }) }}" id="modal-ubah-profil-dosen-{{dosen.id}}" class="validated modal">
	<div class="modal-content">
		<h4>Ubah Profil Dosen</h4>
		<div class="row">
			<div class="col m3 teks-tengah">
			<!-- img src="img/grey.jpg" alt="" class=" activator circle responsive-img">
			<a href="#">Pilih Foto</a> -->
			</div>
		</div>
		<div class="col m9">
			<div class="row">
				<div class="col m12">
					<label for="nama-update">Nama Dosen</label>
					<input type="text" id="nama-update" name="nama" class="validate" value="{{dosen.nama}}" required/>
				</div>
			</div>
			<div class="row">
				<div class="col m12">
					<label for="nip-update">NIP</label>
					<input type="text" id="nip-update" name="nip" class="validate" value="{{dosen.nip}}"  required/>
				</div>
			</div>
			<div class="row">
				<div class="col m12">
					<label for="jeniskelamin-update">Jenis Kelamin</label>
					<select name="jeniskelamin" class="browser-default" required>
					  <!-- <option value="" disabled selected>Pilih jenis kelamin</option> -->
					  <option value="L" {% if dosen.jeniskelamin == 'L' %}selected="true"{% endif %}>Pria</option>
					  <option value="P" {% if dosen.jeniskelamin == 'P' %}selected="true"{% endif %}>Wanita</option>
					</select>
				</div>
			</div>
			<div class="row">
				<div class="col m12">
					<label for="pendidikan-update">Pendidikan</label>
					<input type="text" id="pendidikan-update" name="pendidikan" class="validate" value="{{dosen.pendidikan}}"  required/>
				</div>
			</div>
			<!-- <div class="row">
			<div class="input-field col m12">
			<textarea class="materialize-textarea"></textarea>
			<label for="mengajar_mata_kuliah">Mengajar Mata Kuliah</label>
			</div> -->
		</div>
	</div>
	<div class="modal-footer">
		<button type="submit" class=" modal-action waves-effect waves-green btn">Simpan</a>
	</div>
</form>

<!-- Modal Structure-->
<div id="modal-lihat-profil-dosen-{{dosen.id}}" class="modal">
	<div class="modal-content">
		<div class="row">
		  <div class="col s12">
		    <h2>{{ dosen.nama }}</h2>
		  </div>
		</div>

	    <div class="row">
	      <div class="col s12 m9">
	        <table class="bordered">
	          <tr>
	            <td><strong>NIP</strong></td>
	            <td>{{ dosen.nip }}</td>
	          </tr>
	          <tr>
	            <td><strong>Jenis Kelamin</strong></td>
	            <td>{{ dosen.jenisKelaminAsString }}</td>
	          </tr>
	          <tr>
	            <td><strong>Pendidikan</strong></td>
	            <td>{{ dosen.pendidikan }}</td>
	          </tr>
	          <tr>
	            <td><strong>Rating total</strong></td>
	            <td>{{ dosen.jumlahRatingAsString['depan'] }}.{{ dosen.jumlahRatingAsString['belakang'] }}</td>
	          </tr>
	          <tr>
	            <td><strong>Jumlah Review</strong></td>
	            <td>{{ dosen.review.count }}</td>
	          </tr>
	        </table>
	        <br/>
	      </div>

	      <div class="col s12 m3">
	        <div class="row teal-text text-lighten-3 center-align">
	          <img src="{{ dosen.getFoto }}" alt="" class="rd-circle center-block">
	        </div>
	      </div>
	    </div>

	    <div class="row">
	      <a name="daftarmatakuliah"></a>

	      <div class="col s12 m9">
	        <h5>Pernah Mengajar</h5> 
	        <span class="black-text">
	          {% for matakuliah in dosen.matakuliah.get %} 
	          <a href="{{ urlFor('rincianmatakuliah', {'id' : matakuliah.id }) }}" class="flat left">
	            <img src="{{ matakuliah.foto }}" alt="" class="rd-small-circle left"> 
	            <h6 class="left">{{ matakuliah.nama }}</h6>
	          </a>
	          {% endfor %}
	        </span>
	      </div>
	    </div>
	</div>
</div>

<!-- Modal Structure -->
<div id="modal-hapus-profil-dosen-{{dosen.id}}" class="modal">
	<div class="modal-content">
			<p>Apakah anda yakin ingin hapus profil dosen <strong>{{ dosen.nama }}</strong>?</p>
	</div>
	<div class="modal-footer">
		<a href="#!" class="modal-action modal-close waves-effect waves-green btn">Tidak</a>
		<a href="{{ urlFor('dosendelete', {'id' : dosen.id }) }}" class="modal-action waves-effect waves-green btn geser-kanan-dikit">Ya</a>
	</div>
</div>
{% endfor %}

{% endblock %}

{% block js %}
<script type="text/javascript">
// FORM VALIDATION 
  $('form.validated').each( function() {
    $(this).validate();
  });
</script>
{% endblock %}