{% extends "admin.template.html" %}

{% block title %}Kelola Review{% endblock %}

{% block content %}
{% if flash.notif is defined %}
<div class="row">
  <div class="col s12">
    <div class="card-panel green lighten-1">
      <span class="white-text">{{ flash.notif }}</span>
    </div>
  </div>
</div>
{% endif %}
<h2>Kelola Review</h2>
<table class="responsive-table hoverable white centered">
	 <thead>
          <tr>
              <th data-field="id">ID Review</th>
              <th data-field="name">Tanggal</th>
              <th data-field="price">Nomor</th>
              <th data-field="price">Dosen</th>
              <th data-field="price">Jenis Review</th>
              <th data-field="price">Isi</th>
              <th data-field="price">Action</th>
          </tr>
        </thead>

        <tbody>
        {% for review in daftarReview %}
          <tr>
            <td>{{review.id}}</td>
            <td>({{review.created_at}})</td>
            <td>{{review.pengguna.first.npm}}</td>
            <td>{{review.dosen.first.nama}}</td>
            <td>{{ review.jenisAsString}}</td>
            <td>{{review.isi}}</td>
            <td><a href="#modal-ubah-review-{{review.id}}" class="modal-trigger"><i class="small mdi-editor-mode-edit"></i></a>&nbsp;<a href="#modal-hapus-review-{{review.id}}" class="modal-trigger"><i class="small mdi-action-delete"></i></a></td>
          </tr>
         {% endfor %}
        </tbody>
</table>

		{% for review in daftarReview %}
		
			<!-- Modal Structure -->
			<form method="POST" action="{{ urlFor('reviewupdate', {'id' : review.id }) }}" id="modal-ubah-review-{{review.id}}" class="modal">
				<div class="modal-content">
					<h4>Ubah Review #{{review.id}} ({{ review.created_at }})</h4>
					<div class="col m12">
						<div class="row">
							<div class="col m12">
								<label for="jenis">Jenis</label>
								
						          <select name="jenis" required>
						            <option {% if review.jenis == 'baik' %}selected="true"{%endif%} value="baik">Baik</option>
						            <option {% if review.jenis == 'buruk' %}selected="true"{%endif%} value="buruk">Buruk</option>
						          </select>
							</div>
						</div>
						<div class="row">
							<div class="col m12">
								<label for="isi">Isi</label>
								<textarea name="isi" class="materialize-textarea" required>{{review.isi}}</textarea>
							</div>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="submit" class=" modal-action waves-effect waves-green btn">Simpan</a>
				</div>
			</form>
			<!-- Modal Structure -->
			<div id="modal-hapus-review-{{review.id}}" class="modal">
				<div class="modal-content">
					<p>Apakah anda yakin ingin hapus review #{{review.id}} dari {{review.pengguna.first.nama}}({{review.pengguna.first.npm}})?</p>
				</div>
				<div class="modal-footer">
					<a href="#!" class="modal-action modal-close waves-effect waves-green btn">Tidak</a>
					<a href="{{ urlFor('reviewdelete', {'id' : review.id}) }}" class="modal-action waves-effect waves-green btn geser-kanan-dikit">Ya</a>
				</div>
			</div>

		{% endfor %}

	{% endblock %}