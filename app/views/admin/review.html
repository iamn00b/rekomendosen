{% extends "admin.template.html" %}

{% block title %}Kelola Review{% endblock %}

{% block content %}
<h2>Kelola Review</h2>
<ul id="daftar-review" class="row margin-nol">
	<li>
		{% for review in daftarReview %}
		<div class="col m12 card card-panel grey lighten-5 waves-effect waves-light" href="#!">
			<div class="row no-bottom-space">
				<div class="col s12">
					<a href="#modal-hapus-review-{{review.id}}" class="row rata-kanan hapus-profil-dosen modal-trigger"><i class="mdi-action-highlight-remove"></i></a>
				</div>
			</div>

			<div class="row valign-wrapper modal-trigger" href="#modal-ubah-review-{{review.id}}">
				<div class="col s10">
					<span class="black-text">
						<h4>Review #{{review.id}} ({{ review.created_at }})</h4>
					</span>
					<ul>
						<li>Oleh : {{ review.pengguna.first.npm }}</li>
						<li>Dosen: {{ review.dosen.first.nama}}</li>
						<li>Jenis: {{ review.jenisAsString }}</li>
						<li>Isi: {{ review.isi }}</li>
					</ul>
				</div>
				<div class="col s2">
					<span class="teal-text text-lighten-3 center-align">
						<h5>Vote</h5>
						<h1 style="line-height: 5px;"><strong>{{ review.jumlahVoteAsString }}</strong></h5>
						</span>
					</div>
				</div>
			</div>

			<!-- Modal Structure -->
			<form method="POST" action="{{ urlFor('reviewupdate', {'id' : review.id }) }}" id="modal-ubah-review-{{review.id}}" onsubmit="alert('Review berhasil diubah.');" class="modal">
				<div class="modal-content">
					<h4>Ubah Review #{{review.id}} ({{ review.created_at }})</h4>
					<div class="col m12">
						<div class="row">
							<div class="input-field col m12">
								<input type="text" name="jenis" value="{{review.jenis}}" class="validate" required/>
								<label for="jenis">Jenis</label>
							</div>
						</div>
						<div class="row">
							<div class="input-field col m12">
								<textarea name="isi" class="materialize-textarea" required>{{review.isi}}</textarea>
								<label for="isi">Isi</label>
							</div>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="submit" class=" modal-action waves-effect waves-green btn">Simpan</a>
				</div>
			</form>
			<!-- Modal Structure -->
			<div id="modal-hapus-review-{{review.id}}" class="modal">
				<div class="modal-content">
					<p>Hapus review id {{review.id}} dari {{review.pengguna.first.npm}}?</p>
				</div>
				<div class="modal-footer">
					<a href="#!" class="modal-action modal-close waves-effect waves-green btn">Tidak</a>
					<a href="{{ urlFor('reviewdelete', {'id' : review.id}) }}" class="modal-action waves-effect waves-green btn geser-kanan-dikit" onclick="alert('Review berhasil dihapus.');">Ya</a>
				</div>
			</div>
		</li>
		{% endfor %}
	</ul>
	{% endblock %}